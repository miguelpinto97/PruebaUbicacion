<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Geolocation API</title>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>

<div id="navbar"><span>Red Stapler - Geolocation API</span></div>
<div id="wrapper">
  <button id="location-button" onclick="prueba2()">Get User Location</button>
  <div id="output"></div>
</div>

<script>

function prueba2(){


   if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {



var Http = new XMLHttpRequest();
var latitud = position.coords.latitude;
var logitud = position.coords.longitude;
var APIKEY = "AIzaSyB3hC0qK2wwZQFBWBkM7AtNLWLh0_f2dCM";

var url = 'https://maps.googleapis.com/maps/api/geocode/json?latlng=' + latitud + ',' + logitud
    + '&key='+APIKEY;
Http.open('POST', url);
Http.send();
Http.onreadystatechange = (e) => {
    var jsonResponse = JSON.parse(Http.responseText);

    //console.log(Http.responseText);
alert(jsonResponse .results[0].formatted_address);

}

            var img = new Image();
            img.src = "https://maps.googleapis.com/maps/api/staticmap?center=" + position.coords.latitude + "," + position.coords.longitude + "&zoom=13&size=800x400&sensor=false";
            $('#output').html(img);
        });
    } else {
        alert("Geolocalizaci√≥n no disponible en este navegador");
    }



}
</script>

</body>
</html>
